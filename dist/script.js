(function(r){var n={};function __webpack_require__(e){if(n[e]){return n[e].exports}var t=n[e]={i:e,l:false,exports:{}};r[e].call(t.exports,t,t.exports,__webpack_require__);t.l=true;return t.exports}__webpack_require__.m=r;__webpack_require__.c=n;__webpack_require__.d=function(e,t,r){if(!__webpack_require__.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:r})}};__webpack_require__.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};__webpack_require__.t=function(t,e){if(e&1)t=__webpack_require__(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var r=Object.create(null);__webpack_require__.r(r);Object.defineProperty(r,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var n in t)__webpack_require__.d(r,n,function(e){return t[e]}.bind(null,n));return r};__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e["default"]}:function getModuleExports(){return e};__webpack_require__.d(t,"a",t);return t};__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=1)})([function(e,t,r){var n=r(2);t=n(false);t.push([e.i,".kuan-left-bar{position:fixed;top:3rem;left:1rem;width:18px !important;text-align:center;font-size:16px !important;z-index:99999}.kuan-left-bar .kuan-link{max-width:100%;padding:4px 5px;border-radius:3px;text-decoration:none;width:18px;margin-top:0.4rem;display:inline-block;background:#e74c3c;color:white !important;border:1px solid #e74c3c}.kuan-left-bar .kuan-link:hover{transition:all 0.2s;background:#c0392b}.kuan-left-bar .kuan-link.history{background:#2ecc71;border:1px solid #2ecc71}.kuan-left-bar .kuan-link.history:hover{background:#27ae60;border:1px solid #27ae60}.kuan-left-bar .kuan-link.kuan-vip{background:#3498db;border:1px solid #3498db}.kuan-left-bar .kuan-link.kuan-vip:hover{border:1px solid #2980b9;background:#2980b9}.kuan-left-bar .kuan-link.bd{background:#09aaff;border:1px solid #09aaff}.kuan-left-bar .kuan-link.bd:hover{border:1px solid #0098ea;background:#0098ea}.active-link{color:#e84393;text-decoration:none !important;border:1px solid}\n",""]);e.exports=t},function(e,t,r){r(3)},function(e,t,r){"use strict";e.exports=function(r){var s=[];s.toString=function toString(){return this.map(function(e){var t=cssWithMappingToString(e,r);if(e[2]){return"@media ".concat(e[2]," {").concat(t,"}")}return t}).join("")};s.i=function(e,t,r){if(typeof e==="string"){e=[[null,e,""]]}var n={};if(r){for(var a=0;a<this.length;a++){var i=this[a][0];if(i!=null){n[i]=true}}}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);if(r&&n[l[0]]){continue}if(t){if(!l[2]){l[2]=t}else{l[2]="".concat(t," and ").concat(l[2])}}s.push(l)}};return s};function cssWithMappingToString(e,t){var r=e[1]||"";var n=e[3];if(!n){return r}if(t&&typeof btoa==="function"){var a=toComment(n);var i=n.sources.map(function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")});return[r].concat(i).concat([a]).join("\n")}return[r].join("\n")}function toComment(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e))));var r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t);return"/*# ".concat(r," */")}},function(e,t,r){"use strict";r.r(t);var n="#J_DetailMeta > div.tm-clear > div.tb-property > div > div.tb-detail-hd > h1 > a";var a="#J_Title > h3";var i="https://shop.misiai.com/search/[kw]";var o="http://jx.misiai.com/[url]";var l="//api1.lzpan.com/api";var s="http://pan.naifei.cc/?share=1[disk_id]&pwd=[pwd]";var f="懒盘:";var u="搜索优惠券";var c="查看历史价格";var d="跳转解析平台";var p="解析高速链接";var v="私密分享";var g=[/((?:https?:\/\/)?(?:yun|pan|eyun).baidu.com\/s[hare]*\/[int?surl=]*[\w-_]{5,25})/gi,/((?:https?:\/\/)?(?:\w+\.)?lanzou.?.com\/[\w\-_]{6,13})/gi,/((?:https?:\/\/)?cloud\.?189?.cn\/t\/[\w\-_]+)/gi];var h=[/(被取消了|分享文件已过期|已经被删除|分享内容可能因为|啊哦，你来晚了|取消分享了|外链不存在)/gi];var _=[/(https?:\/\/(?:pan|yun|eyun)\.baidu\.com\/s[hare]*\/[int?surl=]*[\w-_]{8,25})[&\w=]*[^\w]*(?:密码|授权码|提取码)*[：:]*[^\w]*([\w]{4})*/gim,/(https?:\/\/(?:\w+)?\.?lanzou.?\.com\/[\w-_]{6,13})\/?[&\w=]*[^\w]*(?:密码|授权码|提取码)*[：:]*[^\w]*([\w]{4})*/gim,/(https?:\/\/cloud.189.cn\/t\/[\w\-_]+)\/?[^\w]*[(（:：]*([\w]+)*[)）]*/gim];var y=/^(https?:\/\/)([0-9a-z.]+)(:[0-9]+)?([/0-9a-z.]+)?(\?[0-9a-z&=]+)?(#[0-9-a-z]+)?/i;var b=/(pan\.baidu|lanzou|189)/gi;var m={input:"form input",notice:".verify-form > div",click:".input-area > div > a > span"};var k={input:"#code_txt",notice:"body > div.content > div.error-content > div > div.file-info.get-file-box > div.code-panel > div.error-tips.visit_error",click:"body > div.content div > div.file-info.get-file-box > div.code-panel > div.access-code-item > a"};var w=["#pwdload","#passwddiv"];var P=[{input:"input#pwd",notice:"#pwderr",click:"input#sub"},{input:"input#pwd",notice:"#info",click:"#passwddiv > div > div.passwddiv-input > div"}];var x=r(0);var T=r.n(x);function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(!e)return;if(typeof e==="string")return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,t)}function _arrayLikeToArray(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function _iterableToArrayLimit(e,t){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(e)))return;var r=[];var n=true;var a=false;var i=undefined;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done);n=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){a=true;i=e}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(a)throw i}}return r}function _arrayWithHoles(e){if(Array.isArray(e))return e}function selector(e){return document.querySelector(e)}function exportStyle(){var e=document.createElement("style");e.textContent=T.a;document.head.appendChild(e)}function appendLeftBarDom(){var e=selector(".kuan-left-bar");if(e)return e;var t=document.createElement("div");t.classList.add("kuan-left-bar");document.body.appendChild(t);return t}function appendBaiduParseDom(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var r=document.createElement("a");r.setAttribute("target","_blank");r.innerText=p;var n=s.replace("[disk_id]",e).replace("[pwd]",t);r.setAttribute("href",n);r.classList.add("kuan-link");r.classList.add("bd");var a=appendLeftBarDom();a.appendChild(r)}function appendVipVideoDom(e){var t=document.createElement("a");t.setAttribute("target","_blank");t.innerText=d;t.setAttribute("href",e);t.classList.add("kuan-link");t.classList.add("kuan-vip");var r=appendLeftBarDom();r.appendChild(t)}function getCompressPass(){var e=/[【\[激活解压壓提取密码碼：:\]】]{3,}\s*([\w+\.\-\~]+)/gi;var t=document.body.innerText.match(e);var r=[];if(!t)return"";for(var n=0;n<t.length;n++){r.push(t[n])}r=unique(r);return r.join("~~")}function getPass(e,t,r){var n="disk_id="+t+"&disk_type="+e;var a=getPwdValue(e,t);if(a){r({diskPass:a,from:"local"},"success");return}return $.post(l+"/pass/get",n,r,"json")}function sendPass(e,t,r,n){if(e===undefined||t===undefined)return;var a=getCompressValue(e,t);var i="disk_id="+t+"&disk_type="+e+"&disk_state=1"+"&disk_pass="+r+"&file_pass="+a;return $.post(l+"/pass/send",i,n)}function sendInvalidate(e,t){if(e===undefined||t===undefined)return;var r="disk_state=0&disk_id="+t+"&disk_type="+e;return $.post(l+"/pass/send",r,callBack)}function activeAnyLink(e){e=e.replace(new RegExp(e,"ig"),'<a target="_blank" href="http://'.concat(e,'" class="active-link">').concat(e,"</a>"));return e}function getValues(){return GM_listValues()}function setValue(e,t){GM_setValue(e,t)}function getValue(e,t){return GM_getValue(e,t)}function setPwdValue(e,t,r){GM_setValue(e+"_"+t,r)}function getPwdValue(e,t){return GM_getValue(e+"_"+t,"")}function getSentValue(e,t){return GM_getValue(e+"_sent_"+t,"")}function setSentValue(e,t){GM_setValue(e+"_sent_"+t,"ok")}function getCompressValue(e,t){return GM_getValue(e+"_compress_"+t,"")}function setCompressValue(e,t,r){GM_setValue(e+"_compress_"+t,r)}function unique(e){for(var t=0;t<e.length;t++){for(var r=t+1;r<e.length;r++){if(e[t]===e[r]){e.splice(r,1);r--}}}return e}function parsePwd(e){for(var t=0;t<_.length;t++){var r=matchAll(e,_[t]);for(var n=0;n<r.length;n++){if(r[n].length>=3&&r[n][2]!==undefined){var a=getDiskIdAndType(r[n][1]),i=_slicedToArray(a,2),o=i[0],l=i[1];setCompressValue(o,l,getCompressPass());console.log("find pwd: ",l,"===>>",r[n][2]);setPwdValue(o,l,r[n][2])}}}}function matchAll(e,t){var r=[];var n;while(n=t.exec(e)){r.push(n)}return r}function getDiskIdAndType(e){if(typeof e!=="string")return[];var t;t=/https?:\/\/(?:pan|eyun)\.baidu\.com\/share\/init\?surl=([a-zA-Z0-9_\-]{5,25})/gi.exec(e);if(t&&t.length===2){return["BDY",t[1]]}t=/https?:\/\/(?:pan|eyun)\.baidu\.com\/s\/[\d]([a-zA-Z0-9_\-]{5,25})/gi.exec(e);if(t&&t.length===2){return["BDY",t[1]]}t=/https?:\/\/(?:\w+)?\.?lanzou.?\.com\/([\w-_]{6,13})/gi.exec(e);if(t&&t.length===2){return["LZY",t[1]]}t=/https?:\/\/cloud.?189?\.cn\/t\/([\w_]{4,20})/gi.exec(e);if(t&&t.length===2){return["TYY",t[1]]}return[]}function mactchReplaceHtml(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var n;var a=false;var i=0;var o=e;while(n=t.exec(e)){if(i++>100)break;var l=e.substring(0,n.index).slice(-8);if(!/href=['"]?/gi.test(l)&&!/['"]?>$/gi.test(l)){if(n&&n[1]){a=true;if(n[1].indexOf("http")===-1){o=e.replace(new RegExp(n[1],"ig"),'<a target="_blank" href="http://'.concat(n[1],'" class="active-link">').concat(n[1],"</a>"))}else{o=e.replace(new RegExp(n[1],"ig"),'<a target="_blank" href="'.concat(n[1],'" class="active-link">').concat(n[1],"</a>"))}o=o.replace(/www(\.lanzous\.com)/gi,"pan$1")}}}return[a,o]}function helper_slicedToArray(e,t){return helper_arrayWithHoles(e)||helper_iterableToArrayLimit(e,t)||helper_unsupportedIterableToArray(e,t)||helper_nonIterableRest()}function helper_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function helper_unsupportedIterableToArray(e,t){if(!e)return;if(typeof e==="string")return helper_arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return helper_arrayLikeToArray(e,t)}function helper_arrayLikeToArray(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function helper_iterableToArrayLimit(e,t){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(e)))return;var r=[];var n=true;var a=false;var i=undefined;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done);n=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){a=true;i=e}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(a)throw i}}return r}function helper_arrayWithHoles(e){if(Array.isArray(e))return e}function tmallDetail(e){var t=e.href;var r=selector(n).innerText;console.log(r);appendCouponDom(parseTitle(r));appendHistoryDom(t)}function taobaoDetail(e){var t=e.href;var r=selector(a).innerText;console.log(r);appendCouponDom(parseTitle(r));appendHistoryDom(t)}function videoPage(e){var t=e.href;appendVipVideoDom(o.replace("[url]",Base64.encode(t)))}function baiduPwdPage(e){var t=e.href;console.log("helper...");var r=getDiskIdAndType(t),n=helper_slicedToArray(r,2),a=n[0],i=n[1];var o=selector(m.input);var l=selector(m.click);var s=selector(m.notice);s.style.display="block";getPass(a,i,function(e,t){if(t==="success"){console.log(e);if(e&&e.diskPass){setPwdValue(a,i,e.diskPass);s.innerText=f+"查询密码成功！";o.value=e.diskPass;l.click()}else{s.innerText=f+"查询密码失败，请手动输入！"}}else{console.log("系统错误");s.innerText=f+"抱歉，系统错误，获取密码失败"}});o.addEventListener("input",function(e){var t=e.target.value;setPwdValue(a,i,t)})}function baiduIndexPage(e){var t=e.href;console.log("helper...baiduIndexPage");for(var r=0;r<h.length;r++){var n=h[r];if(n.test(document.body.innerText)){console.log("detected invalid page");sendInvalidate(o,l);return}}var a=getDiskIdAndType(t),i=helper_slicedToArray(a,2),o=i[0],l=i[1];var s=getSentValue(o,l);appendBaiduParseDom(l,getPwdValue(o,l));if(!s||s===""){var u=getPwdValue(o,l);sendPass(o,l,u,function(e,t){setSentValue(o,l)})}}function lzyPage(e){var t=e.href;console.log("helper...");var r=getDiskIdAndType(t),n=helper_slicedToArray(r,2),i=n[0],o=n[1];for(var a=0;a<h.length;a++){var l=h[a];if(l.test(document.body.innerText)){console.log("detected invalid page");sendInvalidate(i,o);return}}var s=selector(w[0]);var u=selector(w[1]);var c=null;if(s&&(c=getComputedStyle(s)).getPropertyValue("display")==="block"){console.log("Pwd page Type 1");operate(selector(P[0].input),selector(P[0].click),selector(P[0].notice))}else if(u&&(c=getComputedStyle(u)).getPropertyValue("display")==="block"){console.log("Pwd page Type 2");operate(selector(P[1].input),selector(P[1].click),selector(P[1].notice))}function operate(r,n,a){getPass(i,o,function(e,t){if(t==="success"){console.log(e);if(e&&e.diskPass){setPwdValue(i,o,e.diskPass);a.innerText=f+"查询密码成功！";r.value=e.diskPass;n.click()}}else{a.innerText=f+"抱歉，系统错误，获取密码失败"}});r.addEventListener("input",function(e){var t=e.target.value;setPwdValue(i,o,t)})}var d=setInterval(function(){if(getSentValue(i,o)){clearInterval(d);return}if(!s&&!u||!c||c.getPropertyValue("display")==="none"){console.log("sent");var e=getPwdValue(i,o)||"";sendPass(i,o,e,function(){setSentValue(i,o)});clearInterval(d)}},2e3)}function tyyPage(e){var t=e.href;console.log("helper...");for(var r=0;r<h.length;r++){var n=h[r];if(n.test(document.body.innerText)){console.log("detected invalid page");sendInvalidate(o,l);return}}var a=getDiskIdAndType(t),i=helper_slicedToArray(a,2),o=i[0],l=i[1];var s=selector(k.input);var u=selector(k.click);var c=selector(k.notice);var d=document.body.innerText;var p=null;if(d.indexOf(v)!==-1){getPass(o,l,function(e,t){if(t==="success"){console.log(e);if(e&&e.diskPass){if(c)c.style.display="block";setTimeout(function(){setPwdValue(o,l,e.diskPass);if(c)c.innerText=f+"查询密码成功！";s.value=e.diskPass;u.click();setInterval(waitSuccess,1e3)},500)}else{if(c){c.style.display="block";c.innerText=f+"查询密码失败，请手动输入！"}}}else{console.log("系统错误");c.innerText=f+"抱歉，系统错误，获取密码失败"}});s.addEventListener("input",function(e){var t=e.target.value;setPwdValue(o,l,t)})}setInterval(waitSuccess,1e3);function waitSuccess(){if(getSentValue(o,l))clearInterval(p);if(d.indexOf(v)===-1){clearInterval(p);var e=getPwdValue(o,l)||"";if(!getSentValue(o,l)){sendPass(o,l,e,function(){console.log("sent");setSentValue(o,l)})}}}}function OtherPage(e){var t=e.href;parsePwd(document.body.innerText);document.body.addEventListener("click",function(e){if(e.target!==document.body){var t=e.target.innerHTML;console.log("click html",t);parsePwd(e.target.innerText);if(y.test(t)){var r=t.length*3;var n=document.body.innerHTML;var a=new RegExp(t,"ig").exec(n);if(a){var i=n.substring(a.index-r,a.index+r);if(i.split(t).length-1<2){console.log("loop active");loopToActive(t,e,true)}else{return}}}loopToActive(t,e)}});function loopToActive(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;for(var n=0;n<g.length;n++){var a=mactchReplaceHtml(e,g[n],r),i=helper_slicedToArray(a,2),o=i[0],l=i[1];if(o){t.target.innerHTML=l}}}}var V;function _defineProperty(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var A=location.href;var S=location.hash;var I=location.hostname.replace(/^www\./i,"").toLowerCase();var D={href:A,hash:S,host:I};exportStyle();var L=(V={tmallDetail:/^detail\.tmall\.com$/gi,taobaoDetail:/^item\.taobao\.com$/gi,youkuVideo:/^https?:\/\/v\.youku\.com\/v_show\/.*/gi,qqVideo:/^https?:\/\/v\.qq\.com\/x\/cover\/.*/gi,iqyVideo:/^https?:\/\/\w+\.?iqiyi\.com\/v_.*/gi,mgVideo:/^https?:\/\/\w+\.?mgtv\.com\/b\//gi,leVideo:/^https?:\/\/\w+\.?le\.com\/ptv\/vplay\//gi,tudouVideo:/^https?:\/\/video\.tudou\.com\/v\//gi,souhuVideo:/^https?:\/\/tv\.sohu\.com\/v\//gi,pptvVideo:/^https?:\/\/v\.pptv\.com\/show\//gi},_defineProperty(V,"mgVideo",/^https?:\/\/\w+\.?miguvideo\.com\/mgs\//gi),_defineProperty(V,"bdyPwd",/^https?:\/\/pan\.baidu\.com\/share\/init\?surl=.*/gi),_defineProperty(V,"bdyPage",/^https?:\/\/pan\.baidu\.com\/s\/.*/gi),_defineProperty(V,"lzyPage",/^https?:\/\/(?:\w+)?\.?lanzou.?\.com\/.*/gi),_defineProperty(V,"tyyPage",/^https?:\/\/(?:\w+)?\.?189.?\.cn\/.*/gi),V);~function(){console.log(A);if(L.tmallDetail.test(D.host)){console.log("Tmall Detail");tmallDetail(D);return}if(L.taobaoDetail.test(D.host)){console.log("taobao Detail");taobaoDetail(D);return}if(L.bdyPwd.test(A)){console.log("BDY PWD Page");baiduPwdPage(D);return}if(L.bdyPage.test(A)){console.log("BDY Index Page");baiduIndexPage(D);return}if(L.lzyPage.test(A)){console.log("LZY Index Page");lzyPage(D);return}if(L.tyyPage.test(A)){console.log("TYY Index Page");tyyPage(D);return}if(L.youkuVideo.test(D.href)||L.qqVideo.test(D.href)||L.iqyVideo.test(D.href)||L.mgVideo.test(D.href)||L.leVideo.test(D.href)||L.tudouVideo.test(D.href)||L.souhuVideo.test(D.href)||L.pptvVideo.test(D.href)||L.mgVideo.test(D.href)){console.log("vipVideo Detail");videoPage(D);return}console.log("Other Page");OtherPage(D)}()}]);